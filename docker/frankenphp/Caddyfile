{
    # FrankenPHP configuration
    frankenphp {
        num_threads 8
    }

    admin off
}

:80 {
    log {
        format json
        level INFO
    }

    # Enable compression
    encode zstd gzip

    # Root directory
    root * public/

    # PHP Server with Worker Mode
    php_server {
        root public/
        index index.php
        # Worker mode for Symfony - keeps Kernel in memory
        env FRANKENPHP_WORKER_COMMAND "php public/index.php"
        num_workers 4
    }

    file_server
}

:2019 {
    # Prometheus metrics endpoint
    metrics
}
